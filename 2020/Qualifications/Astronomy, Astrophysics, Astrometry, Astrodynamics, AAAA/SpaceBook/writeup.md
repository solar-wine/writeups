# SPACE SECURITY CHALLENGE 2020 HACK-A-SAT: SpaceBook

* **Category:** Astronomy, Astrophysics, Astrometry, Astrodynamics, AAAA
* **Points:** 75
* **Solves:** 56
* **Description:**

> Hah, yeah we're going to do the hard part anyways! Glue all previous parts together by identifying these stars based on the provided catalog. Match the provided boresight refence vectors to the catalog refence vectors and tell us our attitude.
> 
> Note: The catalog format is unit vector (X,Y,Z) in a celestial reference frame and the magnitude (relative brightness)
>
> Connect to the challenge on spacebook.satellitesabove.me:5015 . Using netcat, you might run nc spacebook.satellitesabove.me 5015
>
> [Download](https://generated.2020.hackasat.com/spacebook/spacebook-uniform52029sierra.tar.bz2)

## Write-up

_Write-up by Solar Wine team_


Inside the tarball we got a test.txt file with X, Y, Z and magnitude of 2500 stars.
```
$ head test.txt 
0.9901070486042983, 0.046084664371116885, -0.13253013247517434, 549.6382843670675
-0.5648023210549782, -0.5051980820871304, 0.6525130159517085, 549.4880561627137
-0.08963335797988148, -0.9863065117587962, -0.13843888904294901, 549.3641639146753
-0.9874602733443869, 0.15337030891033063, 0.0374133253183751, 549.3606049698848
-0.9099118329257517, 0.3138909217548853, -0.27116958815760933, 549.3132115540117
0.7139864420827506, -0.6968443060246982, 0.06805419665951397, 549.2683484218633
0.24323997540145237, -0.19788841747332786, 0.9495654209145374, 548.9684943905835
0.560153428906733, 0.3441271133281618, -0.7535281454308499, 548.8514933917396
-0.3345682558771369, 0.19562118145112195, -0.9218440407829287, 548.815767892051
-0.13267061928560403, -0.9673170998490305, 0.21609288539430288, 548.6589232064719
```

Output of nc spacebook.satellitesabove.me 5015
```
0.015917,	-0.065042,	0.997756,	522.792957
0.066702,	-0.034912,	0.997162,	509.558897
0.116028,	0.107259,	0.987438,	505.563653
-0.127042,	-0.095660,	0.987274,	500.270255
0.102627,	-0.139129,	0.984942,	149.681133
-0.031727,	0.160189,	0.986576,	148.568062
0.066189,	0.018438,	0.997637,	145.010686
0.002971,	0.040328,	0.999182,	144.924090
-0.020081,	0.150530,	0.988401,	138.163414
-0.131538,	-0.093347,	0.986906,	134.933667
0.046041,	-0.098031,	0.994118,	127.908382
-0.136352,	-0.067206,	0.988378,	125.352989
-0.152302,	-0.031790,	0.987823,	122.787697
0.078979,	0.034016,	0.996296,	115.471696
0.039458,	-0.161481,	0.986087,	109.729468
0.007523,	-0.019874,	0.999774,	105.571504
-0.051503,	-0.143206,	0.988352,	105.248741
0.074921,	0.053640,	0.995746,	104.901364
0.155618,	0.037800,	0.987094,	104.432125
0.029049,	-0.134387,	0.990503,	101.085212
-0.002381,	0.002161,	0.999995,	100.368922
0.034713,	-0.129698,	0.990946,	99.838365
-0.005085,	-0.140364,	0.990087,	95.093196
0.032601,	-0.061609,	0.997568,	92.137924
-0.054048,	-0.046980,	0.997433,	83.233591
0.120141,	0.063140,	0.990747,	71.811018
0.024737,	-0.111520,	0.993454,	68.020752
0.074520,	0.121914,	0.989739,	67.939109
-0.128976,	0.073819,	0.988896,	63.537248
0.024246,	-0.124286,	0.991950,	62.952702
0.118651,	0.097312,	0.988156,	51.153963

Index Guesses (Comma Delimited):
```

Output of nc command, tell us the X, Y, Z and magnitude of stars from a specific position.
We have to guess the index of 5 stars.

Magnitude seems to be the same that are provided in the test.txt file.
Just cat it to check it:

``` {.text fontsize="\scriptsize" }
# value truncated to 5 digits
$ cat -b test.txt | grep 522.79295
   247	0.26806733832630036,	0.007903695005027862,	0.9633677562218492,	522.7929572357748

# grep the magnitude of the first 5 stars
$ cat -b test.txt | egrep "522.79295|509.55889|505.56365|500.27025|149.68113"
247	0.26806733832630036,	0.007903695005027862,	0.9633677562218492,	522.7929572357748
342	0.2869863909599968,	-0.04764379316731881,	0.9567491209174878,	509.55889713187145
373	0.4070124633013756,	-0.12292770243171812,	0.9051130507799594,	505.56365269512855
430	0.26102788669173493,	0.1539419575415715,	0.9529776052339929,	500.2702553957997
444	0.18006173124134658,	-0.06346977241636366,	0.9816055016817011,	149.68113323830417
```

"cat -b" start at 1.
So indexes of the first 5 stars are : 246,341,372,429,443
Let's try it:

```
[...]

Index Guesses (Comma Delimited):
246,341,372,429,443
4 Left...
-0.057171,	0.114364,	0.991792,	535.133735
0.131428,	0.069850,	0.988862,	534.176746
-0.038011,	-0.030079,	0.998824,	529.335341
-0.158979,	-0.018636,	0.987106,	500.647059
0.080791,	0.139944,	0.986858,	148.760143
-0.116869,	-0.088033,	0.989238,	147.802778
-0.111232,	0.120242,	0.986493,	116.466086
0.112478,	-0.047730,	0.992507,	116.428327
0.095513,	0.115726,	0.988678,	113.636526
-0.117986,	-0.126873,	0.984877,	108.984525
0.102010,	0.115670,	0.988036,	104.653635
-0.007050,	0.025713,	0.999645,	104.308554
-0.041392,	0.037647,	0.998433,	103.860587
-0.040177,	0.016492,	0.999056,	101.671298
-0.102211,	-0.128958,	0.986368,	62.451013

Index Guesses (Comma Delimited):
```

There are only 5 stages and because the output is always the same, we didn't automate the solution with a script.
It was quicker to manually grep values and send it.

As a solution, just copy/paste ;)

``` {.text fontsize="\scriptsize" }
$ nc spacebook.satellitesabove.me 5015
Ticket please:
ticket{uniform52029sierra:GG5prgyMdFtPuV5TmOY6mRBNwwVIGByeOzFdon1-hGBOKGBEGYprrBi8EzWFqy0Bhw}
0.015917,	-0.065042,	0.997756,	522.792957
0.066702,	-0.034912,	0.997162,	509.558897
0.116028,	0.107259,	0.987438,	505.563653
-0.127042,	-0.095660,	0.987274,	500.270255
0.102627,	-0.139129,	0.984942,	149.681133
-0.031727,	0.160189,	0.986576,	148.568062
0.066189,	0.018438,	0.997637,	145.010686
0.002971,	0.040328,	0.999182,	144.924090
-0.020081,	0.150530,	0.988401,	138.163414
-0.131538,	-0.093347,	0.986906,	134.933667
0.046041,	-0.098031,	0.994118,	127.908382
-0.136352,	-0.067206,	0.988378,	125.352989
-0.152302,	-0.031790,	0.987823,	122.787697
0.078979,	0.034016,	0.996296,	115.471696
0.039458,	-0.161481,	0.986087,	109.729468
0.007523,	-0.019874,	0.999774,	105.571504
-0.051503,	-0.143206,	0.988352,	105.248741
0.074921,	0.053640,	0.995746,	104.901364
0.155618,	0.037800,	0.987094,	104.432125
0.029049,	-0.134387,	0.990503,	101.085212
-0.002381,	0.002161,	0.999995,	100.368922
0.034713,	-0.129698,	0.990946,	99.838365
-0.005085,	-0.140364,	0.990087,	95.093196
0.032601,	-0.061609,	0.997568,	92.137924
-0.054048,	-0.046980,	0.997433,	83.233591
0.120141,	0.063140,	0.990747,	71.811018
0.024737,	-0.111520,	0.993454,	68.020752
0.074520,	0.121914,	0.989739,	67.939109
-0.128976,	0.073819,	0.988896,	63.537248
0.024246,	-0.124286,	0.991950,	62.952702
0.118651,	0.097312,	0.988156,	51.153963

Index Guesses (Comma Delimited):
246,341,372,429,443
4 Left...
-0.057171,	0.114364,	0.991792,	535.133735
0.131428,	0.069850,	0.988862,	534.176746
-0.038011,	-0.030079,	0.998824,	529.335341
-0.158979,	-0.018636,	0.987106,	500.647059
0.080791,	0.139944,	0.986858,	148.760143
-0.116869,	-0.088033,	0.989238,	147.802778
-0.111232,	0.120242,	0.986493,	116.466086
0.112478,	-0.047730,	0.992507,	116.428327
0.095513,	0.115726,	0.988678,	113.636526
-0.117986,	-0.126873,	0.984877,	108.984525
0.102010,	0.115670,	0.988036,	104.653635
-0.007050,	0.025713,	0.999645,	104.308554
-0.041392,	0.037647,	0.998433,	103.860587
-0.040177,	0.016492,	0.999056,	101.671298
-0.102211,	-0.128958,	0.986368,	62.451013

Index Guesses (Comma Delimited):
129,136,178,422,468
3 Left...
0.100129,	-0.061707,	0.993059,	512.167506
-0.059940,	0.024722,	0.997896,	511.008522
0.139861,	0.101677,	0.984937,	134.933667
0.069883,	-0.141034,	0.987535,	127.653667
0.047937,	-0.050454,	0.997575,	126.921705
0.114408,	0.094952,	0.988886,	125.352989
-0.140200,	-0.018491,	0.989950,	124.002891
0.080791,	0.076122,	0.993820,	122.787697
0.020262,	-0.111834,	0.993520,	121.033694
-0.050268,	0.062088,	0.996804,	117.978821
0.029637,	-0.085045,	0.995936,	116.520279
-0.074679,	-0.071143,	0.994667,	115.724463
0.012496,	-0.105905,	0.994298,	112.064291
-0.079429,	0.022579,	0.996585,	107.166760
-0.092416,	0.035327,	0.995094,	103.811803
-0.128275,	-0.026019,	0.991397,	98.157339
0.153121,	0.016920,	0.988063,	84.396680
-0.026538,	0.089373,	0.995645,	63.537248
-0.141772,	0.096860,	0.985149,	54.221724

Index Guesses (Comma Delimited):
316,326,969,1212,1252
2 Left...
-0.092547,	0.139709,	0.985858,	545.263829
0.133002,	0.035864,	0.990467,	522.792957
-0.135281,	-0.010548,	0.990751,	511.008522
0.141635,	0.094066,	0.985440,	509.558897
0.065899,	-0.094418,	0.993349,	500.270255
-0.072011,	0.141144,	0.987367,	148.568062
0.100086,	0.127510,	0.986775,	145.010686
0.043459,	0.092751,	0.994740,	144.924090
-0.057074,	0.144118,	0.987913,	138.163414
0.061252,	-0.096442,	0.993452,	134.933667
0.038111,	-0.083492,	0.995779,	125.352989
0.000634,	-0.073379,	0.997304,	122.787697
-0.102241,	0.009036,	0.994719,	117.978821
-0.150425,	0.001791,	0.988620,	107.166760
0.092930,	0.058148,	0.993973,	105.571504
0.150317,	-0.066251,	0.986416,	105.248741
-0.150556,	0.020049,	0.988398,	103.811803
0.069668,	0.064492,	0.995483,	100.368922
0.140840,	0.050888,	0.988724,	92.137924
0.011146,	-0.165758,	0.986104,	84.396680
0.074953,	-0.006643,	0.997165,	83.233591
0.054599,	-0.140174,	0.988620,	70.596799
-0.066279,	0.011597,	0.997734,	63.537248
-0.141449,	0.098958,	0.984987,	54.221724

Index Guesses (Comma Delimited):
35,246,326,341,429
1 Left...
0.045029,	0.156326,	0.986679,	524.950569
-0.021636,	0.071278,	0.997222,	518.965046
0.103725,	-0.054862,	0.993092,	501.118800
0.000622,	0.063260,	0.997997,	144.521828
-0.081199,	-0.085352,	0.993037,	142.280710
-0.105274,	0.135207,	0.985209,	139.470803
-0.075529,	-0.088306,	0.993226,	128.737722
-0.000823,	0.073627,	0.997286,	125.168984
0.013174,	0.122420,	0.992391,	124.834612
0.076632,	-0.072081,	0.994451,	119.747708
-0.052624,	0.033375,	0.998057,	116.693268
0.038071,	0.016613,	0.999137,	115.343043
0.145358,	-0.044048,	0.988398,	111.166493
-0.072499,	-0.078960,	0.994238,	109.984816
-0.092745,	0.143403,	0.985309,	109.571902
0.044251,	0.042103,	0.998133,	108.873786
0.121119,	-0.084577,	0.989028,	103.035263
0.076569,	0.107808,	0.991219,	80.512855

Index Guesses (Comma Delimited):
228,271,415,644,718
0 Left...
flag{uniform52029sierra:GIW5DLpjCRu5d_jyOQVMGl1-83vdWl5e-rl7X4sV1MXPTm0pop1mw9P8i1x3-CU3gDVp4idEIEtLs1osznSDjqQ}
```
